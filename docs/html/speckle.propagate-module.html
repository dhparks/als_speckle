<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>speckle.propagate</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="speckle-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="speckle-module.html">Package&nbsp;speckle</a> ::
        Module&nbsp;propagate
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="speckle.propagate-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module propagate</h1><p class="nomargin-top"><span class="codelink"><a href="speckle.propagate-pysrc.html">source&nbsp;code</a></span></p>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="speckle.propagate-module.html#propagate_one_distance" class="summary-sig-name">propagate_one_distance</a>(<span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">energy_or_wavelength</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">z</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">pixel_pitch</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">phase</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">data_is_fourier</span>=<span class="summary-sig-default">False</span>)</span><br />
      Propagate a wavefield a single distance, by supplying either the energy (or wavelength) and the distance
or by supplying a pre-calculated quadratic phase factor.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="speckle.propagate-pysrc.html#propagate_one_distance">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_get_wavelength"></a><span class="summary-sig-name">_get_wavelength</span>(<span class="summary-sig-arg">energy_or_wavelength</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="speckle.propagate-pysrc.html#_get_wavelength">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="speckle.propagate-module.html#propagate_distance" class="summary-sig-name">propagate_distance</a>(<span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">distances</span>,
        <span class="summary-sig-arg">energy_or_wavelength</span>,
        <span class="summary-sig-arg">pixel_pitch</span>,
        <span class="summary-sig-arg">gpuinfo</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">subarraysize</span>=<span class="summary-sig-default">None</span>)</span><br />
      Propagates a complex-valued wavefield through a range of distances, 
      with the ability to use a GPU for faster computation.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="speckle.propagate-pysrc.html#propagate_distance">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="speckle.propagate-module.html#apodize" class="summary-sig-name">apodize</a>(<span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">kt</span>=<span class="summary-sig-default">8</span>,
        <span class="summary-sig-arg">threshold</span>=<span class="summary-sig-default">0.01</span>,
        <span class="summary-sig-arg">sigma</span>=<span class="summary-sig-default">5</span>,
        <span class="summary-sig-arg">return_type</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">data</code><code class="variable-quote">'</code></span>)</span><br />
      Apodizes a 2d array so that upon back propagation ringing from the aperture is at least somewhat suppressed.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="speckle.propagate-pysrc.html#apodize">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="speckle.propagate-module.html#acutance" class="summary-sig-name">acutance</a>(<span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">method</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">sobel</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">exponent</span>=<span class="summary-sig-default">2</span>,
        <span class="summary-sig-arg">normalized</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">mask</span>=<span class="summary-sig-default">None</span>)</span><br />
      Calculates the acutance of a back propagated wave field.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="speckle.propagate-pysrc.html#acutance">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_acutance_calc"></a><span class="summary-sig-name">_acutance_calc</span>(<span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">method</span>,
        <span class="summary-sig-arg">normalized</span>,
        <span class="summary-sig-arg">mask</span>,
        <span class="summary-sig-arg">exponent</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="speckle.propagate-pysrc.html#_acutance_calc">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_apodization_f"></a><span class="summary-sig-name">_apodization_f</span>(<span class="summary-sig-arg">x</span>,
        <span class="summary-sig-arg">n</span>,
        <span class="summary-sig-arg">kt</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="speckle.propagate-pysrc.html#_apodization_f">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="I"></a><span class="summary-name">I</span> = <code title="1j">1j</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'speckle'"><code class="variable-quote">'</code><code class="variable-string">speckle</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="propagate_one_distance"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">propagate_one_distance</span>(<span class="sig-arg">data</span>,
        <span class="sig-arg">energy_or_wavelength</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">z</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">pixel_pitch</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">phase</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">data_is_fourier</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="speckle.propagate-pysrc.html#propagate_one_distance">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Propagate a wavefield a single distance, by supplying either the energy (or wavelength) and the distance
or by supplying a pre-calculated quadratic phase factor.

Required input:
    data: 2d array (nominally complex, but real valued is ok) describing the wavefield.
    
Optional input:
    energy_or_wavelength: the energy or wavelength of the wavefield. If &gt; 1, assumed to be energy in eV.
        If &lt; 1, assumed to be wavelength in meters. Ignored if a quadratic phase factor is supplied.
    
    z: the distance to propagate the wavefield, in meters. Ignored if a quadratic phase factor is supplied.
    
    pixel_pitch: the size of the pixels in real space, in meters. Ignored if a quadratic phase factor is supplied.
    
    phase: a precalculated quadratic phase factor containing the wavelength, distance, etc information already.
        If supplied, any optional arguments to energy_or_wavelength, z, or pixel_pitch are ignored.
        
    data_is_fourier: set to True if the wavefield data has already been fourier transformed.
    
returns: a complex array representing the propagated wavefield.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="propagate_distance"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">propagate_distance</span>(<span class="sig-arg">data</span>,
        <span class="sig-arg">distances</span>,
        <span class="sig-arg">energy_or_wavelength</span>,
        <span class="sig-arg">pixel_pitch</span>,
        <span class="sig-arg">gpuinfo</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">subarraysize</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="speckle.propagate-pysrc.html#propagate_distance">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Propagates a complex-valued wavefield through a range of distances, 
  with the ability to use a GPU for faster computation.</p>
  <p>Required input: data: a square numpy.ndarray, either float32 or 
  complex64, to be propagated distances: an iterable set of distances (in 
  meters!) over which the propagated field is calculated 
  energy_or_wavelength: the energy (in eV) or wavelength (in meters) of the
  wavefield. It's assumed that if the number is &lt; 1 it is a wavelength. 
  pixel_pitch: the size (in meters) of each pixel in data.</p>
  <p>Optional input: gpuinfo: pass the bundle of information coming from 
  gpu.init() here to use the GPU. subarraysize: because the number of files
  can be large a subarray cocentered with data can be specified.</p>
  <p>Returns: a complex-valued 3d ndarray of shape 
  (len(distances),subarraysize,subarraysize). If the subarraysize argument 
  wasn't used the size of the output array is 
  (len(distances),len(data),len(data)). returned[n] is the wavefield 
  propagated to distances[n].</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="apodize"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">apodize</span>(<span class="sig-arg">data</span>,
        <span class="sig-arg">kt</span>=<span class="sig-default">8</span>,
        <span class="sig-arg">threshold</span>=<span class="sig-default">0.01</span>,
        <span class="sig-arg">sigma</span>=<span class="sig-default">5</span>,
        <span class="sig-arg">return_type</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">data</code><code class="variable-quote">'</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="speckle.propagate-pysrc.html#apodize">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Apodizes a 2d array so that upon back propagation ringing from the aperture is at least somewhat suppressed.
This steps this function follows are as follows:
    # 1. unwrap the data
    # 2. find the boundary at each angle
    # 3. do a 1d filter along each angle
    # 4. rewrap
    
This function works best with binary supports where the edge is clearly defined. Antialiased objects will lead to filters
with some artifacts.

Required input:
data: 2d ndarray containing the data to be apodized. This data should be been sliced so that the only object is the target data. For example, a phase reconstruction with a multipartite support should be sliced so that only one component of the support is passed to this function (this may change in the future but object detection can be tricky). data should also be sufficiently symmetric such that at each angle after unwrapping there is only a single solution to the location of the object boundary.

Optional named input:
kt: strength of apodizer. float or int.
threshold: float or int value defines the boundary of the data.
sigma: boundary locations are smoothed to avoid with jagged edges; this sets  the smoothing. float or int.
return_type: can return the filtered data, just the filter, or intermediates for debugging/inspection

Returns: apodized array

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="acutance"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">acutance</span>(<span class="sig-arg">data</span>,
        <span class="sig-arg">method</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">sobel</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">exponent</span>=<span class="sig-default">2</span>,
        <span class="sig-arg">normalized</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">mask</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="speckle.propagate-pysrc.html#acutance">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Calculates the acutance of a back propagated wave field. Right now it just
does the acutance of the magnitude component.

Required input:
data: 2d or 3d ndarray object. if 3d, the acutance of each frame will be calculated

Optional input:
method -- keyword indicating how to compute the discrete derivative. options are 'sobel' and 'roll'.
        Default is 'sobel'
exponent -- raise the modulus of the gradient to this value. 2 by default.
normalized -- normalize all the back propagated signals so they have the same amount of power. Default is True.
mask -- you can supply a binary ndarray as mask so that the calculation happens only in a certain
    region of space. If no mask is supplied the calculation is over all space.
    Default is None
 
Returns:
a list of acutance values, one for each frame of the supplied data.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="speckle-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Mon Jun 25 16:55:50 2012
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
